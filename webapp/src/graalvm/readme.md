# GraalVM native build prerequisites

To build native image on Windows, one have to install additional tools. See the [official documentation](https://www.graalvm.org/latest/docs/getting-started/windows/#prerequisites-for-using-native-image-on-windows).

There is also a good [tutorial](https://medium.com/graalvm/using-graalvm-and-native-image-on-windows-10-9954dc071311) available.

Once you have all the prerequisites installed, you have to execute the Gradle build from within the __x64 Native Tools Command Prompt for VS 20xx__. The build won't work from any other command prompt.

## Build arguments

The application might not work as expected due to many reasons. I came across reflections and resources problems. There is a good [tutorial](https://bell-sw.com/blog/master-spring-boot-3-with-graalvm-native-image/#mcetoc_1gpv11hri1hsm) how to configure the build.

In short, you have to start the application like a plain java app:
```
java -agentlib:native-image-agent=config-output-dir=./config -jar xxx.jar
```
While you are using the application, all resources you are utilizing will be written into the `config` directory. Then you just have to attach the configuration files into the build.

## Spring Boot integration

Spring Boot (v3.1.0 at the time of writing these lines) is [capable](https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html#native-image.introducing-graalvm-native-images.understanding-aot-processing) of creating the config json files, but I found the config files generated by AOT uncompleted.
